syntax = "proto3";

package config;

option go_package = "github.com/morrowc/irc-bot/proto/config";

message IRCServer {
  string host = 1;
  int32 port = 2;
  bool use_tls = 3;
  string nick = 4;
  string user = 5; // Username/ident
  string password = 6; // Server password if needed
}

message Channel {
  string name = 1;
  string key = 2; // Channel key/password
  int32 history_limit = 3; // Number of messages to keep in history
}

message TLS {
  string ca_file = 1;
  string cert_file = 2; // Server cert
  string key_file = 3;  // Server key
  string client_cn = 4; // Expected CN for client (server-side check)
  string client_cert_file = 5; // Client cert
  string client_key_file = 6;  // Client key
}

message Service {
  int32 port = 1;
  // Deprecated: use global tls config
  string cert_file = 2; 
  string key_file = 3; 
  string client_passkey = 4; // Simple auth for now
  string host = 5;
}

message Config {
  IRCServer irc = 1;
  repeated Channel channels = 2;
  Service service = 3;
  TLS tls = 4;
}
